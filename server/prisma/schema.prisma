// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Sessions {
  uid        String   @id @unique @default(uuid())
  otp        String   @db.VarChar(16)
  email      String   @db.VarChar(64)
  createdUtc DateTime @default(now()) @map("created_utc")
  updatedUtc DateTime @updatedAt @map("updated_utc")

  @@map("sessions")
}

model Person {
  uid         String   @id @unique @default(uuid())
  accountId   String   @unique @map("account_id") @db.VarChar(36)
  fullName    String   @map("full_name") @db.VarChar(128)
  state       String   @db.VarChar(12) // P-Pending A-Active V-Verified S-Suspended X-Deleted  
  email       String   @unique @db.VarChar(64)
  phone       String?  @db.VarChar(24)
  telegram    String?  @db.VarChar(24)
  avatar      String?  @db.Text // a DataURI
  preferences Json?    @db.Json
  createdUtc  DateTime @default(now()) @map("created_utc")
  updatedUtc  DateTime @updatedAt @map("updated_utc")

  @@map("persons")
}
